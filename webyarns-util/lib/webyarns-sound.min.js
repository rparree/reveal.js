"use strict";function _defineProperty(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],e=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(e=(a=u.next()).done)&&(n.push(a.value),!r||n.length!==r);e=!0);}catch(t){o=!0,i=t}finally{try{e||null==u.return||u.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():document.addEventListener("DOMContentLoaded",t)}(function(){function s(t){return t.startsWith("!")||t.startsWith(">")||t.startsWith("#")?t.substring(1):t}function f(t){return t?t.split(",").map(function(t){return t.trim()}):[]}function y(t,r){var n=_slicedToArray(function(t,i){return t.reduce(function(t,r){var n=_slicedToArray(t,2),e=n[0],o=n[1];return i(r)?[[].concat(_toConsumableArray(e),[r]),o]:[e,[].concat(_toConsumableArray(o),[r])]},[[],[]])}(r,function(t){return t.startsWith("!")}),2),e=n[0],o=n[1],i=o.filter(function(t){return t.startsWith("#")}).map(s),a=o.filter(function(t){return t.startsWith(">")}).map(s);p=[].concat(_toConsumableArray(p),_toConsumableArray(a));var u=t.map(s),l=r.map(s),c=e.map(s);return[[].concat(_toConsumableArray(u.filter(function(t){return!o.includes(t)}).filter(function(t){return!c.includes(t)}).filter(function(t){return-1===p.indexOf(t)})),_toConsumableArray(i)),[].concat(_toConsumableArray(l.filter(function(t){return!u.includes(t)}).filter(function(t){return!i.includes(t)})),_toConsumableArray(c))]}var t,e=null==(t=document.getElementById("sounds"))?(console.error('Cannot find <script id="sounds" type="application/json">'),{}):JSON.parse(t.innerHTML),d=Object.keys(e).reduce(function(t,r){var n=new Howl({src:e[r].src,loop:Boolean(e[r].loop)});return n.on("fade",function(t){0===n.volume()&&n.stop(t)}),Object.assign(t,_defineProperty({},r,n))},{}),p=[];return{soundHandler:function(n){function r(t){var r=n.currentSlide.getAttribute(t);return r?parseInt(r,10):1500}var t,e=null===(t=n.previousSlide)||void 0===t?void 0:t.getAttribute("data-sounds"),o=n.currentSlide.getAttribute("data-sounds"),i=f(o),a=f(e),u=_slicedToArray(y(a,i),2),l=u[0],c=u[1];l.map(function(t){d[t]?d[t].fade(1,0,r("fade-out-speed")):console.error("no invalid audioMap for "+t)}),c.map(function(t){d[t]?(d[t].stop(),d[t].play(),d[t].fade(0,1,r("fade-in-speed"))):console.error("no invalid audioMap for "+t)})},_test:{nextAudioActions:y}}});