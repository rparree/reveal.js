"use strict";

/*
 * Example Map:
     const navMap1 = {
        buttons: {
            "moby": {
                showId:"d",
                to: 6,
            },
            "1984": 16,
            "write": 18,
        },
        "end": 68
    }

 *
 *
 */
function initScienceButtons(svg) {
  var map = getMap(svg); // @ts-ignore

  svg.contentDocument.querySelectorAll("a").forEach(function (a) {
    a.addEventListener("click", function (e) {
      // @ts-ignore
      e.preventDefault();
      var target = e.currentTarget;
      if (!target) throw new Error("Event has no currentTarget");
      target.classList.remove("unclicked");
      svg.blur();
      var btnId = target.getAttribute("id");
      if (!btnId) throw new Error("cannot find id attribute on ".concat(target));
      var navTo = map.buttons[btnId];

      if (navTo) {
        Reveal.slide(navTo.to || navTo);
      } else console.warn("No navigation available in ", map.buttons);

      if (navTo === null || navTo === void 0 ? void 0 : navTo.showId) {
        var btn2 = svgContentDocument(svg).getElementById(navTo.showId);
        if (!btn2) throw new Error("Could not find element with id ".concat(navTo.showId));
        btn2.classList.remove("invisible");
      }

      if (noButtonsLeft(svg)) {
        var end = map.end;

        if (!end) {
          var parentNode = svg.parentNode;
          parentNode === null || parentNode === void 0 ? void 0 : parentNode.removeChild(svg);
        } else {
          var _document$getElementB, _document$getElementB2, _document$getElementB3;

          end && ((_document$getElementB = document.getElementById("science-home")) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.setAttribute("data-auto-move-to", end));
          end && ((_document$getElementB2 = document.getElementById("science-home")) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.setAttribute("data-auto-move-time-sec", "0.1"));
          end && ((_document$getElementB3 = document.getElementById("science-home")) === null || _document$getElementB3 === void 0 ? void 0 : _document$getElementB3.setAttribute("data-next-slide-indexh", end));
        }
      }
    });
  });
}

function getMap(svg) {
  var attribute = svg.getAttribute("data-map");
  if (!attribute) throw new Error("object with svg requires data-map attribute  ");
  return eval(attribute);
}

function noButtonsLeft(svg) {
  var contentDocument = svg.contentDocument;
  if (!contentDocument) throw new Error("No contentDocument on svg ");
  return svgContentDocument(svg).querySelectorAll("a.unclicked").length === 0;
}

var svgContentDocument = function svgContentDocument(svg) {
  var contentDocument = svg.contentDocument;
  if (!contentDocument) throw new Error("No contentDocument on svg ");
  return contentDocument;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zdmctYnV0dG9ucy50cyJdLCJuYW1lcyI6WyJpbml0U2NpZW5jZUJ1dHRvbnMiLCJzdmciLCJtYXAiLCJnZXRNYXAiLCJjb250ZW50RG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImEiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIkVycm9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYmx1ciIsImJ0bklkIiwiZ2V0QXR0cmlidXRlIiwibmF2VG8iLCJidXR0b25zIiwiUmV2ZWFsIiwic2xpZGUiLCJ0byIsImNvbnNvbGUiLCJ3YXJuIiwic2hvd0lkIiwiYnRuMiIsInN2Z0NvbnRlbnREb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibm9CdXR0b25zTGVmdCIsImVuZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImRvY3VtZW50Iiwic2V0QXR0cmlidXRlIiwiYXR0cmlidXRlIiwiZXZhbCIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkEsU0FBU0Esa0JBQVQsQ0FBNEJDLEdBQTVCLEVBQW9EO0FBQ2hELE1BQU1DLEdBQUcsR0FBR0MsTUFBTSxDQUFDRixHQUFELENBQWxCLENBRGdELENBR2hEOztBQUNBQSxFQUFBQSxHQUFHLENBQUNHLGVBQUosQ0FBb0JDLGdCQUFwQixDQUF3RCxHQUF4RCxFQUE2REMsT0FBN0QsQ0FBcUUsVUFBQUMsQ0FBQyxFQUFJO0FBQ3RFQSxJQUFBQSxDQUFDLENBQUNDLGdCQUFGLENBQW1CLE9BQW5CLEVBQTRCLFVBQUNDLENBQUQsRUFBbUI7QUFDM0M7QUFDQUEsTUFBQUEsQ0FBQyxDQUFDQyxjQUFGO0FBQ0EsVUFBTUMsTUFBbUIsR0FBZUYsQ0FBQyxDQUFDRyxhQUExQztBQUNBLFVBQUksQ0FBQ0QsTUFBTCxFQUNJLE1BQU0sSUFBSUUsS0FBSixDQUFVLDRCQUFW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TUcsZUFBZSxHQUFHSCxHQUFHLENBQUNHLGVBQTVCO0FBQ0EsTUFBSSxDQUFDQSxlQUFMLEVBQ0ksTUFBTSxJQUFJUyxLQUFKLENBQVUsNEJBQVYsQ0FBTjtBQUNKLFNBQU9ULGVBQVA7QUFDSCxDQUxEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIEV4YW1wbGUgTWFwOlxuICAgICBjb25zdCBuYXZNYXAxID0ge1xuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBcIm1vYnlcIjoge1xuICAgICAgICAgICAgICAgIHNob3dJZDpcImRcIixcbiAgICAgICAgICAgICAgICB0bzogNixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIjE5ODRcIjogMTYsXG4gICAgICAgICAgICBcIndyaXRlXCI6IDE4LFxuICAgICAgICB9LFxuICAgICAgICBcImVuZFwiOiA2OFxuICAgIH1cblxuICpcbiAqXG4gKi9cblxuXG5mdW5jdGlvbiBpbml0U2NpZW5jZUJ1dHRvbnMoc3ZnOiBIVE1MT2JqZWN0RWxlbWVudCkge1xuICAgIGNvbnN0IG1hcCA9IGdldE1hcChzdmcpXG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgc3ZnLmNvbnRlbnREb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxBbmNob3JFbGVtZW50PihcImFcIikuZm9yRWFjaChhID0+IHtcbiAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldDogSFRNTEVsZW1lbnQ9IDxIVE1MRWxlbWVudD5lLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdmVudCBoYXMgbm8gY3VycmVudFRhcmdldFwiKVxuICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJ1bmNsaWNrZWRcIilcbiAgICAgICAgICAgIHN2Zy5ibHVyKClcbiAgICAgICAgICAgIGNvbnN0IGJ0bklkID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICAgICAgaWYgKCFidG5JZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCBmaW5kIGlkIGF0dHJpYnV0ZSBvbiAke3RhcmdldH1gKVxuICAgICAgICAgICAgY29uc3QgbmF2VG8gPSBtYXAuYnV0dG9uc1tidG5JZF07XG4gICAgICAgICAgICBpZiAobmF2VG8pIHtcbiAgICAgICAgICAgICAgICBSZXZlYWwuc2xpZGUobmF2VG8udG8gfHwgbmF2VG8pXG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyBuYXZpZ2F0aW9uIGF2YWlsYWJsZSBpbiBcIiwgbWFwLmJ1dHRvbnMpXG4gICAgICAgICAgICBpZiAobmF2VG8/LnNob3dJZCkge1xuICAgICAgICAgICAgICAgIGxldCBidG4yID0gc3ZnQ29udGVudERvY3VtZW50KHN2ZykuZ2V0RWxlbWVudEJ5SWQobmF2VG8uc2hvd0lkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWJ0bjIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgZWxlbWVudCB3aXRoIGlkICR7bmF2VG8uc2hvd0lkfWApXG4gICAgICAgICAgICAgICAgYnRuMi5jbGFzc0xpc3QucmVtb3ZlKFwiaW52aXNpYmxlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9CdXR0b25zTGVmdChzdmcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gbWFwLmVuZDtcbiAgICAgICAgICAgICAgICBpZiAoIWVuZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnROb2RlID0gc3ZnLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKHN2Zyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NpZW5jZS1ob21lXCIpPy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG8tbW92ZS10b1wiLCBlbmQpXG4gICAgICAgICAgICAgICAgICAgIGVuZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjaWVuY2UtaG9tZVwiKT8uc2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvLW1vdmUtdGltZS1zZWNcIiwgXCIwLjFcIilcbiAgICAgICAgICAgICAgICAgICAgZW5kICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NpZW5jZS1ob21lXCIpPy5zZXRBdHRyaWJ1dGUoXCJkYXRhLW5leHQtc2xpZGUtaW5kZXhoXCIsIGVuZClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG59XG5cbmZ1bmN0aW9uIGdldE1hcChzdmc6IEhUTUxPYmplY3RFbGVtZW50KSB7XG4gICAgbGV0IGF0dHJpYnV0ZSA9IHN2Zy5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1hcFwiKTtcbiAgICBpZiAoIWF0dHJpYnV0ZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib2JqZWN0IHdpdGggc3ZnIHJlcXVpcmVzIGRhdGEtbWFwIGF0dHJpYnV0ZSAgXCIpXG4gICAgcmV0dXJuIGV2YWwoYXR0cmlidXRlKTtcbn1cblxuXG5mdW5jdGlvbiBub0J1dHRvbnNMZWZ0KHN2ZzogSFRNTE9iamVjdEVsZW1lbnQpIHtcbiAgICBjb25zdCBjb250ZW50RG9jdW1lbnQgPSBzdmcuY29udGVudERvY3VtZW50O1xuICAgIGlmICghY29udGVudERvY3VtZW50KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb250ZW50RG9jdW1lbnQgb24gc3ZnIFwiKVxuICAgIHJldHVybiBzdmdDb250ZW50RG9jdW1lbnQoc3ZnKS5xdWVyeVNlbGVjdG9yQWxsKFwiYS51bmNsaWNrZWRcIikubGVuZ3RoID09PSAwO1xufVxuXG5jb25zdCBzdmdDb250ZW50RG9jdW1lbnQgPSAoc3ZnOiBIVE1MT2JqZWN0RWxlbWVudCk6IERvY3VtZW50ICA9PiB7XG4gICAgY29uc3QgY29udGVudERvY3VtZW50ID0gc3ZnLmNvbnRlbnREb2N1bWVudDtcbiAgICBpZiAoIWNvbnRlbnREb2N1bWVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGVudERvY3VtZW50IG9uIHN2ZyBcIilcbiAgICByZXR1cm4gY29udGVudERvY3VtZW50XG59XG4iXX0=